import{a as q}from"./chunk-FJT5XX4G.js";import{a as F}from"./chunk-O4FSFJHU.js";import{a as b,b as d,c as h,d as E,e as y,f as c,g as I,i as L,j as M,q as N,r as T}from"./chunk-VMUGSCRI.js";import{f as x,j as C}from"./chunk-JBOJZZSR.js";import"./chunk-CIFOQXDC.js";import{$a as u,Da as f,Ia as v,Ib as w,Lb as S,Ma as p,Xa as m,Za as i,_a as t,bb as g,cb as l,eb as n,fb as _,za as a}from"./chunk-LKSHZACS.js";function G(e,r){e&1&&(i(0,"div"),n(1,"Email is required."),t())}function k(e,r){e&1&&(i(0,"div"),n(1,"Invalid email format."),t())}function A(e,r){if(e&1&&(i(0,"div",13),p(1,G,2,0,"div",14)(2,k,2,0,"div",14),t()),e&2){let o=l();a(),m("ngIf",o.f.email.errors.required),a(),m("ngIf",o.f.email.errors.email)}}function P(e,r){e&1&&(i(0,"div"),n(1,"Password is required."),t())}function B(e,r){if(e&1&&(i(0,"div",13),p(1,P,2,0,"div",14),t()),e&2){let o=l();a(),m("ngIf",o.f.password.errors.required)}}function R(e,r){if(e&1&&(i(0,"div",15)(1,"div"),n(2),t()()),e&2){let o=l();a(2),_(o.errorMsg)}}var D=class e{constructor(r,o){this.authService=r;this.baseService=o}errorMsg="";submitted=!1;form=new y({email:new c("",[d.required,d.email]),password:new c("",[d.required])});get f(){return this.form.controls}save(){this.submitted=!0,this.errorMsg="",!this.form.invalid&&this.authService.login(this.form.value).subscribe({next:r=>{this.baseService.setUser(r.data)},error:r=>{this.errorMsg=r?.error?.message||"Login failed"}})}static \u0275fac=function(o){return new(o||e)(f(q),f(F))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:23,vars:4,consts:[[1,"utility_wrap"],[1,"utility_content","w-password-page","w-form"],[1,"utility_content-wrap","w-password-page",3,"ngSubmit","formGroup"],[1,"form_wrap"],[1,"form_field-block"],["for","email",1,"form_label","w-password-page"],["formControlName","email","id","email","placeholder","Email","type","email",1,"form_input","w-password-page","w-input"],["class","text-danger",4,"ngIf"],["for","password",1,"form_label","w-password-page"],["formControlName","password","id","password","placeholder","Password","type","password",1,"form_input","w-password-page","w-input"],["type","submit",1,"btn_main","w-password-page","w-button"],["routerLink","/signup",1,"link"],["class","form_error w-password-page",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"form_error","w-password-page"]],template:function(o,s){o&1&&(i(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return s.save()}),i(3,"h1"),n(4,"Login"),t(),i(5,"div",3)(6,"div",4)(7,"label",5),n(8,"Email"),t(),u(9,"input",6),p(10,A,3,2,"div",7),t(),i(11,"div",4)(12,"label",8),n(13,"Password"),t(),u(14,"input",9),p(15,B,2,1,"div",7),t(),i(16,"button",10),n(17,"Login"),t(),i(18,"p"),n(19," Don\u2019t have an account? "),i(20,"a",11),n(21,"Signup"),t()()(),p(22,R,3,1,"div",12),t()()()),o&2&&(a(2),m("formGroup",s.form),a(8),m("ngIf",s.submitted&&s.f.email.errors),a(5),m("ngIf",s.submitted&&s.f.password.errors),a(7),m("ngIf",s.errorMsg))},dependencies:[S,w,C,x,N,I,b,h,E,T,L,M],encapsulation:2})};export{D as LoginComponent};
