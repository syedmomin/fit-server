import{a as R}from"./chunk-FJT5XX4G.js";import{a as P}from"./chunk-O4FSFJHU.js";import{a as b,b as s,c as E,d as y,e as N,f,g as I,i as T,j as q,q as M,r as F}from"./chunk-VMUGSCRI.js";import{e as h,f as x,j as C}from"./chunk-JBOJZZSR.js";import"./chunk-CIFOQXDC.js";import{$a as u,Da as c,Ia as v,Ib as w,Lb as S,Ma as p,Xa as l,Za as r,_a as t,bb as g,cb as d,eb as o,fb as _,za as a}from"./chunk-LKSHZACS.js";function D(e,n){e&1&&(r(0,"div"),o(1,"Full Name is required."),t())}function G(e,n){if(e&1&&(r(0,"div",17),p(1,D,2,0,"div",18),t()),e&2){let i=d();a(),l("ngIf",i.f.fullName.errors==null?null:i.f.fullName.errors.required)}}function k(e,n){e&1&&(r(0,"div"),o(1,"Email is required."),t())}function B(e,n){e&1&&(r(0,"div"),o(1,"Invalid email format."),t())}function L(e,n){if(e&1&&(r(0,"div",17),p(1,k,2,0,"div",18)(2,B,2,0,"div",18),t()),e&2){let i=d();a(),l("ngIf",i.f.email.errors==null?null:i.f.email.errors.required),a(),l("ngIf",i.f.email.errors==null?null:i.f.email.errors.email)}}function j(e,n){e&1&&(r(0,"div"),o(1,"Phone is required."),t())}function V(e,n){if(e&1&&(r(0,"div",17),p(1,j,2,0,"div",18),t()),e&2){let i=d();a(),l("ngIf",i.f.phone.errors==null?null:i.f.phone.errors.required)}}function U(e,n){e&1&&(r(0,"div"),o(1,"Password is required."),t())}function z(e,n){e&1&&(r(0,"div"),o(1,"Password must be at least 6 characters."),t())}function H(e,n){if(e&1&&(r(0,"div",17),p(1,U,2,0,"div",18)(2,z,2,0,"div",18),t()),e&2){let i=d();a(),l("ngIf",i.f.password.errors==null?null:i.f.password.errors.required),a(),l("ngIf",i.f.password.errors==null?null:i.f.password.errors.minlength)}}function J(e,n){if(e&1&&(r(0,"div",19)(1,"div"),o(2),t()()),e&2){let i=d();a(2),_(i.errorMsg)}}var A=class e{constructor(n,i,m){this.auth=n;this.router=i;this.baseService=m}loading=!1;errorMsg="";submitted=!1;form=new N({fullName:new f("",[s.required]),email:new f("",[s.required,s.email]),phone:new f("",[s.required]),password:new f("",[s.required,s.minLength(6)])});get f(){return this.form.controls}save(){this.submitted=!0,this.errorMsg="",!this.form.invalid&&(this.loading=!0,this.auth.signup(this.form.value).subscribe({next:n=>{this.loading=!1,this.baseService.setUser(n.data),this.router.navigateByUrl("/login")},error:n=>{this.loading=!1,this.errorMsg=n?.error?.message||"Signup failed"}}))}static \u0275fac=function(i){return new(i||e)(c(R),c(h),c(P))};static \u0275cmp=v({type:e,selectors:[["app-signup"]],decls:33,vars:6,consts:[[1,"utility_wrap"],[1,"utility_content","w-password-page","w-form"],[1,"utility_content-wrap","w-password-page",3,"ngSubmit","formGroup"],[1,"form_wrap"],[1,"form_field-block"],["for","fullName",1,"form_label","w-password-page"],["formControlName","fullName","id","fullName","placeholder","Full Name",1,"form_input","w-password-page","w-input"],["class","text-danger",4,"ngIf"],["for","email",1,"form_label","w-password-page"],["formControlName","email","id","email","placeholder","Email","type","email",1,"form_input","w-password-page","w-input"],["for","phone",1,"form_label","w-password-page"],["formControlName","phone","id","phone","placeholder","Phone",1,"form_input","w-password-page","w-input"],["for","password",1,"form_label","w-password-page"],["formControlName","password","id","password","placeholder","Password","type","password",1,"form_input","w-password-page","w-input"],["type","submit",1,"btn_main","w-password-page","w-button"],["routerLink","/login",1,"link"],["class","form_error w-password-page",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"form_error","w-password-page"]],template:function(i,m){i&1&&(r(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return m.save()}),r(3,"h1"),o(4,"Signup"),t(),r(5,"div",3)(6,"div",4)(7,"label",5),o(8,"Full Name*"),t(),u(9,"input",6),p(10,G,2,1,"div",7),t(),r(11,"div",4)(12,"label",8),o(13,"Email*"),t(),u(14,"input",9),p(15,L,3,2,"div",7),t(),r(16,"div",4)(17,"label",10),o(18,"Phone*"),t(),u(19,"input",11),p(20,V,2,1,"div",7),t(),r(21,"div",4)(22,"label",12),o(23,"Password*"),t(),u(24,"input",13),p(25,H,3,2,"div",7),t(),r(26,"button",14),o(27,"Save"),t(),r(28,"p"),o(29," Already have an account? "),r(30,"a",15),o(31,"Login"),t()()(),p(32,J,3,1,"div",16),t()()()),i&2&&(a(2),l("formGroup",m.form),a(8),l("ngIf",m.submitted&&m.f.fullName.errors),a(5),l("ngIf",m.submitted&&m.f.email.errors),a(5),l("ngIf",m.submitted&&m.f.phone.errors),a(5),l("ngIf",m.submitted&&m.f.password.errors),a(7),l("ngIf",m.errorMsg))},dependencies:[S,w,C,x,M,I,b,E,y,F,T,q],encapsulation:2})};export{A as SignupComponent};
